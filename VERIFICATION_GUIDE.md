# 動作確認ガイド

## 🌐 基本的な動作確認

### ステップ1: ブラウザでアクセス

以下のURLにアクセスしてください：

```
https://purplelion51.sakura.ne.jp/cafejob/
```

または

```
https://purplelion51.sakura.ne.jp/cafejob
```

### ステップ2: 表示される内容を確認

#### ✅ 正常な場合

以下のいずれかが表示されます：

1. **Laravelのウェルカムページ**
   - "Laravel" のロゴとメッセージが表示される

2. **アプリケーションのホームページ**
   - 既にルーティングが設定されている場合、ホームページが表示される

3. **ログインページ**
   - 認証が必要な場合、ログインページが表示される

#### ❌ エラーが表示される場合

以下のエラーが表示される可能性があります：

---

## 🔍 よくあるエラーと対処法

### エラー1: 500 Internal Server Error

**症状:**
- ブラウザに「500 Internal Server Error」と表示される
- 白い画面が表示される

**確認方法:**

1. **ログファイルを確認**
   - FTPで `storage/logs/laravel.log` をダウンロード
   - エラーメッセージを確認

2. **よくある原因と対処法:**

   **原因A: APP_KEYが設定されていない**
   ```
   エラーメッセージ: "No application encryption key has been specified"
   ```
   - 対処: サーバーの `.env` ファイルで `APP_KEY=` が正しく設定されているか確認

   **原因B: データベース接続エラー**
   ```
   エラーメッセージ: "SQLSTATE[HY000] [2002] Connection refused"
   または "Access denied for user"
   ```
   - 対処: `.env` ファイルのデータベース設定を確認
     ```env
     DB_HOST=localhost
     DB_DATABASE=データベース名
     DB_USERNAME=ユーザー名
     DB_PASSWORD=パスワード
     ```

   **原因C: ディレクトリの権限不足**
   ```
   エラーメッセージ: "The stream or file ... could not be opened"
   または "Permission denied"
   ```
   - 対処: `storage` と `bootstrap/cache` の権限を **775** に設定

   **原因D: vendorディレクトリが存在しない**
   ```
   エラーメッセージ: "require(vendor/autoload.php): failed to open stream"
   ```
   - 対処: `vendor` ディレクトリがアップロードされているか確認

### エラー2: 404 Not Found

**症状:**
- 「404 Not Found」と表示される

**確認事項:**

1. **URLが正しいか確認**
   - `https://purplelion51.sakura.ne.jp/cafejob/` にアクセスしているか確認
   - 末尾のスラッシュ（`/`）の有無を確認

2. **.htaccessファイルが正しく配置されているか確認**
   - プロジェクトルート（`/cafejob/`）に `.htaccess` があるか確認
   - `public/.htaccess` も存在するか確認

3. **Webサーバーの設定を確認**
   - さくらサーバーのコントロールパネルで、サブディレクトリの設定を確認

### エラー3: CSSや画像が表示されない

**症状:**
- ページは表示されるが、スタイルが適用されていない
- 画像が表示されない

**確認事項:**

1. **アセットのパスを確認**
   - ブラウザの開発者ツール（F12）を開く
   - 「ネットワーク」タブで404エラーが出ているファイルを確認

2. **publicディレクトリの確認**
   - `public/assets` ディレクトリがアップロードされているか確認
   - `public/storage` がシンボリックリンクになっているか確認

3. **APP_URLの設定を確認**
   ```env
   APP_URL=https://purplelion51.sakura.ne.jp/cafejob
   ```
   - 末尾にスラッシュがないことを確認

---

## 🔧 詳細な確認方法

### 方法1: ログファイルを確認

1. **FTPでログファイルをダウンロード**
   - `storage/logs/laravel.log` をダウンロード

2. **エラーメッセージを確認**
   - ファイルの最後の部分に最新のエラーが記録されています
   - エラーメッセージを読んで、原因を特定

3. **一時的にデバッグモードを有効化（本番環境では注意）**
   ```env
   APP_DEBUG=true
   ```
   - **重要**: デバッグモードを有効にすると、詳細なエラー情報が表示されます
   - **セキュリティ**: 本番環境では必ず `APP_DEBUG=false` に戻してください

### 方法2: ブラウザの開発者ツールを使用

1. **ブラウザでF12キーを押す**
   - 開発者ツールが開きます

2. **「コンソール」タブを確認**
   - JavaScriptエラーがないか確認

3. **「ネットワーク」タブを確認**
   - 404エラーや500エラーが出ているファイルを確認
   - どのリソースが読み込めていないか確認

### 方法3: サーバーのエラーログを確認

さくらサーバーのコントロールパネルで：

1. 「ログ」→「エラーログ」を選択
2. 最新のエラーメッセージを確認

---

## ✅ チェックリスト

動作確認時に以下を確認してください：

### 基本設定
- [ ] `.env` ファイルがサーバーにアップロードされている
- [ ] `APP_URL=https://purplelion51.sakura.ne.jp/cafejob` が設定されている（末尾スラッシュなし）
- [ ] `APP_DEBUG=false` に設定されている（本番環境）
- [ ] `APP_KEY` が設定されている

### ファイル構造
- [ ] `.htaccess` がプロジェクトルートに配置されている
- [ ] `public/.htaccess` が存在する
- [ ] `vendor` ディレクトリがアップロードされている
- [ ] `storage` ディレクトリが存在する
- [ ] `bootstrap/cache` ディレクトリが存在する

### 権限設定
- [ ] `storage` ディレクトリの権限が **775** に設定されている
- [ ] `bootstrap/cache` ディレクトリの権限が **775** に設定されている

### データベース
- [ ] データベース情報が正しく設定されている
- [ ] データベースマイグレーションが実行されている（必要に応じて）

### 動作確認
- [ ] ブラウザで `https://purplelion51.sakura.ne.jp/cafejob/` にアクセスできる
- [ ] エラーページが表示されない
- [ ] CSSや画像が正しく読み込まれる
- [ ] ログインページが表示される（認証が必要な場合）

---

## 🎯 次のステップ

動作確認が完了したら：

1. **機能テスト**
   - ログイン機能が動作するか確認
   - 各ページが正しく表示されるか確認

2. **パフォーマンス確認**
   - ページの読み込み速度を確認
   - エラーがないか確認

3. **セキュリティ確認**
   - `APP_DEBUG=false` になっているか確認
   - `.env` ファイルが外部からアクセスできないか確認

---

## 📞 トラブルシューティング

問題が解決しない場合：

1. **エラーメッセージを確認**
   - `storage/logs/laravel.log` の内容を確認

2. **設定を再確認**
   - `.env` ファイルの設定が正しいか確認
   - ファイルの権限が正しいか確認

3. **サーバー提供者に確認**
   - さくらサーバーのサポートに問い合わせ
   - PHPのバージョンや拡張機能が正しく設定されているか確認

