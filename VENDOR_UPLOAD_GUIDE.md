# vendorディレクトリのアップロード手順

## 🔍 問題の原因

`vendor` ディレクトリがサーバーにアップロードされていないため、Laravelが起動できずに500エラーが発生しています。

## 🔧 解決方法

### 方法1: FTPでアップロード（時間がかかります）

ローカル環境の `vendor` ディレクトリをサーバーにアップロードします。

**手順:**

1. **FTPクライアントを起動**
   - FileZilla、WinSCPなど

2. **ローカル環境の `vendor` ディレクトリを選択**
   - `c:\xampp\htdocs\cafejob\vendor\`

3. **サーバーの `/cafejob/` ディレクトリに移動**

4. **`vendor` ディレクトリをアップロード**
   - ドラッグ&ドロップまたは右クリック→「アップロード」
   - **注意**: `vendor` ディレクトリは大きいので、アップロードに時間がかかります（数十分〜数時間）

5. **アップロード完了後、権限を設定**
   - `/cafejob/vendor/` → **755**
   - `/cafejob/vendor/autoload.php` → **644**

**推奨設定（FileZillaの場合）:**
- 「転送」→「転送モード」→「バイナリ」を選択
- 「サーバー」→「強制表示」を選択（隠しファイルを表示）

### 方法2: SSHでComposerを実行（推奨・高速）

SSHアクセスが可能な場合、サーバー上でComposerを実行する方が高速です。

**手順:**

1. **SSHでサーバーに接続**
   ```bash
   ssh username@purplelion51.sakura.ne.jp
   ```

2. **プロジェクトディレクトリに移動**
   ```bash
   cd /cafejob
   ```

3. **Composerの依存関係をインストール**
   ```bash
   composer install --no-dev --optimize-autoloader
   ```

4. **権限を設定**
   ```bash
   chmod -R 755 vendor
   ```

**注意**: 
- `--no-dev` オプションで開発用パッケージを除外（本番環境用）
- `--optimize-autoloader` オプションでオートローダーを最適化

### 方法3: 必要なファイルのみアップロード（最小限）

`vendor` ディレクトリ全体ではなく、最低限必要なファイルのみをアップロード：

**最低限必要なファイル:**
- `vendor/autoload.php`
- `vendor/composer/` ディレクトリ全体
- 各パッケージのディレクトリ

**注意**: この方法は複雑で、すべての依存関係を手動でアップロードする必要があるため、推奨しません。

---

## 📋 アップロード前の確認

### ローカル環境で確認

1. **`vendor` ディレクトリが存在するか確認**
   ```
   c:\xampp\htdocs\cafejob\vendor\
   ```

2. **`autoload.php` が存在するか確認**
   ```
   c:\xampp\htdocs\cafejob\vendor\autoload.php
   ```

3. **ディレクトリのサイズを確認**
   - `vendor` ディレクトリのサイズを確認（通常は数十MB〜数百MB）

---

## ✅ アップロード後の確認

### サーバー上で確認

1. **`/cafejob/vendor/` ディレクトリが存在するか確認**
2. **`/cafejob/vendor/autoload.php` が存在するか確認**
3. **ディレクトリのサイズを確認**
   - ローカル環境と同程度のサイズになっているか確認

### 動作確認

1. **`/cafejob/public/index.php` にアクセス**
   ```
   https://purplelion51.sakura.ne.jp/cafejob/public/index.php
   ```

2. **エラーが解消されたか確認**
   - 500エラーが解消され、Laravelが起動するか確認

---

## 🎯 推奨される手順

### SSHアクセスがある場合（推奨）

1. **SSHでサーバーに接続**
2. **`composer install --no-dev --optimize-autoloader` を実行**
3. **権限を設定**
4. **動作確認**

### SSHアクセスがない場合

1. **FTPで `vendor` ディレクトリをアップロード**
2. **権限を設定**
3. **動作確認**

---

## ⚠️ 注意事項

1. **アップロード時間**
   - `vendor` ディレクトリは大きいので、アップロードに時間がかかります
   - 数十分〜数時間かかる場合があります

2. **ネットワーク接続**
   - アップロード中はネットワーク接続が切れないように注意してください
   - 接続が切れた場合は、再開機能があるFTPクライアントを使用してください

3. **ディスク容量**
   - サーバーのディスク容量を確認してください
   - `vendor` ディレクトリは数十MB〜数百MBの容量を使用します

4. **権限設定**
   - アップロード後、必ず権限を設定してください
   - `/cafejob/vendor/` → **755**
   - `/cafejob/vendor/autoload.php` → **644**

---

## 📞 トラブルシューティング

### アップロードが途中で失敗した場合

1. **FTPクライアントの再開機能を使用**
   - FileZilla: 転送が失敗したファイルを右クリック→「転送を再開」

2. **部分的にアップロードされたファイルを削除**
   - 不完全なファイルを削除して、再アップロード

### アップロード後も500エラーが続く場合

1. **権限を確認**
   - `/cafejob/vendor/` → **755**
   - `/cafejob/vendor/autoload.php` → **644**

2. **ログファイルを確認**
   - `storage/logs/laravel.log` を確認

3. **エラーログを確認**
   - さくらサーバーのコントロールパネルでエラーログを確認

